---
openapi: 3.0.1
info:
  title: API Iume Owner
  version: v1
  description: Owner endpoints
paths:
  "/v1/owners/emails":
    get:
      summary: show email
      tags:
      - Emails
      parameters:
      - name: email
        in: query
        schema:
          type: integer
      security:
      - bearer: []
      responses:
        '200':
          description: email found
          content: {}
        '404':
          description: email not found
          content: {}
        '422':
          description: when email is blank
          content:
            application/json:
              schema:
                type: object
                properties:
                  email:
                    type: array
                    items:
                      type: string
                      example: can't be blank
  "/v1/owners/feedbacks":
    post:
      summary: create feedback
      tags:
      - Feedbacks
      security:
      - bearer: []
      parameters: []
      responses:
        '201':
          description: created success
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  type:
                    type: string
                    exemple: feedbacks
                  attributes:
                    type: object
                    properties:
                      screen:
                        type: screen
                        example: home
                      body:
                        type: string
        '422':
          description: created success
          content:
            application/json:
              schema:
                type: object
                properties:
                  body:
                    type: array
                    items:
                      type: string
                      example: can't be blank
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                feedback:
                  type: object
                  properties:
                    screen:
                      type: string
                      example: Home
                    body:
                      type: string
                      example: At eaque quia sit facere tempora reprehenderit incidunt
                        voluptate libero?
              required:
              - body
  "/v1/owners/restaurants/sections/{section_id}/products":
    get:
      summary: get all products of a section
      tags:
      - Products
      security:
      - bearer: []
      parameters:
      - name: section_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: product array
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      "$ref": "#/components/schemas/product"
    post:
      summary: create product
      tags:
      - Products
      security:
      - bearer: []
      parameters:
      - name: section_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '201':
          description: create success
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    "$ref": "#/components/schemas/product"
        '422':
          description: create fail
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: array
                    items:
                      type: string
                      example: can't be blank
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                product:
                  type: object
                  properties:
                    name:
                      type: string
                      example: Hackett, Effertz and Terry
                    description:
                      type: string
                      example: Enim quos perferendis. Praesentium ea quisquam. Quidem
                        qui sit. Et quam vitae. Maxime autem dolorem.
                    image:
                      type: object
                      properties:
                        data:
                          type: string
                          description: Only base64 date
                          example: data:image/jpeg;base64,/9j/4RiDRXhpZgAATU0AKgA...
                    price:
                      type: integer
                      example: '10.0'
                    active:
                      type: boolean
                  required:
                  - name
                  - price
                  - active
  "/v1/owners/restaurants/sections/{section_id}/products/{id}":
    get:
      summary: show product
      tags:
      - Products
      security:
      - bearer: []
      parameters:
      - name: section_id
        in: path
        required: true
        schema:
          type: string
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: product found
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    "$ref": "#/components/schemas/product"
        '401':
          description: Not autorization
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    "$ref": "#/components/schemas/product"
    put:
      summary: update product
      tags:
      - Products
      security:
      - bearer: []
      description: Use image_destroy only if you need delete image
      parameters:
      - name: section_id
        in: path
        required: true
        schema:
          type: string
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '202':
          description: update remove image
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    "$ref": "#/components/schemas/product"
        '422':
          description: update fail
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: array
                    items:
                      type: string
                      example: can't be blank
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                product:
                  type: object
                  properties:
                    name:
                      type: string
                      example: Braun-Tromp
                    description:
                      type: string
                      example: Veniam qui sed. Qui accusamus libero. Dolore quam eum.
                        Tenetur omnis vel. Distinctio quam est. Corr.
                    image:
                      type: object
                      properties:
                        data:
                          type: string
                          description: Only base64 date
                          example: data:image/jpeg;base64,/9j/4RiDRXhpZgAATU0AKgA...
                    price:
                      type: integer
                      example: '10.0'
                    active:
                      type: boolean
                    image_destroy:
                      type: boolean
                      description: If you need delete image
                  required:
                  - name
                  - price
                  - active
    delete:
      summary: Delete product
      tags:
      - Products
      security:
      - bearer: []
      parameters:
      - name: section_id
        in: path
        required: true
        schema:
          type: string
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: destroy success
          content: {}
  "/v1/owners/restaurants/sections/{section_id}/products/sort":
    put:
      summary: update sorts
      tags:
      - Products
      description: Owner can reorder position of products
      security:
      - bearer: []
      parameters:
      - name: section_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '202':
          description: update positions
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      "$ref": "#/components/schemas/product"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                product:
                  type: object
                  properties:
                    ids:
                      type: array
                      example:
                      - 1
                      - 2
                      - 3
                      - 4
                      - 5
                  required:
                  - ids
  "/v1/owners/restaurants/{restaurant_id}/sections":
    get:
      summary: get all sections of a restaurant
      tags:
      - Sections
      security:
      - bearer: []
      parameters:
      - name: restaurant_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: sections array
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      "$ref": "#/components/schemas/section"
    post:
      summary: create section
      tags:
      - Sections
      security:
      - bearer: []
      parameters:
      - name: restaurant_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '201':
          description: create success
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    "$ref": "#/components/schemas/section"
        '422':
          description: create fail
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: array
                    items:
                      type: string
                      example: can't be blank
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                section:
                  type: object
                  properties:
                    name:
                      type: string
                      example: Walker-Paucek
                    position:
                      type: integer
                      example: 1
                    active:
                      type: boolean
              required:
              - name
              - active
  "/v1/owners/restaurants/{restaurant_id}/sections/{id}":
    get:
      summary: show section
      tags:
      - Sections
      security:
      - bearer: []
      parameters:
      - name: restaurant_id
        in: path
        required: true
        schema:
          type: string
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: section found
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    "$ref": "#/components/schemas/section"
        '404':
          description: section not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    "$ref": "#/components/schemas/section"
    put:
      summary: update section
      tags:
      - Sections
      security:
      - bearer: []
      parameters:
      - name: restaurant_id
        in: path
        required: true
        schema:
          type: string
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '202':
          description: update success
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    "$ref": "#/components/schemas/section"
        '422':
          description: update fail
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: array
                    items:
                      type: string
                      example: can't be blank
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                section:
                  type: object
                  properties:
                    name:
                      type: string
                      example: Bergstrom LLC
                    position:
                      type: integer
                      example: 1
                    active:
                      type: boolean
              required:
              - name
              - active
    delete:
      summary: Delete section
      tags:
      - Sections
      security:
      - bearer: []
      parameters:
      - name: restaurant_id
        in: path
        required: true
        schema:
          type: string
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: destroy success
          content: {}
  "/v1/owners/restaurants/{restaurant_id}/sections/sort":
    put:
      summary: update sorts
      tags:
      - Sections
      description: Owner can reorder position of sections
      security:
      - bearer: []
      parameters:
      - name: restaurant_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '202':
          description: update positions
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      "$ref": "#/components/schemas/section"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                section:
                  type: object
                  properties:
                    ids:
                      type: array
                      example:
                      - 1
                      - 2
                      - 3
                      - 4
                      - 5
              required:
              - ids
  "/v1/owners/restaurants":
    post:
      summary: Create
      tags:
      - Restaurants
      security:
      - bearer: []
      parameters: []
      responses:
        '201':
          description: create restaurant
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    "$ref": "#/components/schemas/restaurant"
        '422':
          description: create failt
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: array
                    items:
                      type: string
                      example: can't be blank
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                restaurant:
                  type: object
                  properties:
                    name:
                      type: string
                      example: Hilll, Hoppe and McKenzie
                    active:
                      type: boolean
              required:
              - name
              - active
    get:
      summary: All restaurants
      tags:
      - Restaurants
      security:
      - bearer: []
      responses:
        '200':
          description: return array
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      "$ref": "#/components/schemas/restaurant"
  "/v1/owners/restaurants/{id}":
    put:
      summary: update restaurant
      tags:
      - Restaurants
      security:
      - bearer: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '202':
          description: update success
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    "$ref": "#/components/schemas/restaurant"
        '422':
          description: create failt
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: array
                    items:
                      type: string
                      example: can't be blank
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                restaurant:
                  type: object
                  properties:
                    name:
                      type: string
                      example: Stamm, Will and Stoltenberg
                    active:
                      type: boolean
              required:
              - name
              - active
    get:
      summary: show restaurant
      tags:
      - Restaurants
      security:
      - bearer: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: found
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: array
                    items:
                      type: string
                      example: can't be blank
        '404':
          description: not found
          content: {}
  "/v1/owners/restaurants/availability_slug":
    put:
      summary: check slug availability
      tags:
      - Restaurants
      security:
      - bearer: []
      parameters: []
      responses:
        '202':
          description: availability
          content: {}
        '422':
          description: availability
          content:
            application/json:
              schema:
                type: object
                properties:
                  slug:
                    type: array
                    items:
                      type: string
                      example:
                      - has already been taken
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                restaurant:
                  type: object
                  properties:
                    slug:
                      type: string
                      example: ea-ipsum
              required:
              - name
              - active
  "/v1/owners/sessions":
    post:
      summary: Login
      tags:
      - Sessions
      parameters: []
      responses:
        '201':
          description: login success
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    example: xxxxx
                required:
                - token
        '422':
          description: login fail
          content:
            application/json:
              schema:
                type: object
                properties:
                  password:
                    type: array
                    items:
                      type: string
                      example: Password wrong
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                login:
                  type: object
                  properties:
                    email:
                      type: string
                      example: dillon@gleason.name
                    password:
                      type: string
                      example: '12345678'
              required:
              - email
              - password
  "/v1/owners/sessions/me":
    delete:
      summary: Destroy session
      tags:
      - Sessions
      security:
      - bearer: []
      responses:
        '204':
          description: login success
          content: {}
        '401':
          description: when owner is not logged in
          content: {}
  "/v1/owners":
    post:
      summary: Creates a owner
      tags:
      - Owners
      parameters: []
      responses:
        '201':
          description: owner created
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    example: xxxxx
                required:
                - token
        '422':
          description: owner created fail
          content:
            application/json:
              schema:
                type: object
                properties:
                  email:
                    type: array
                    items:
                      type: string
                      example: Email is invalid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                owner:
                  type: object
                  properties:
                    email:
                      type: string
                      example: hung@turner.info
                    password:
                      type: string
                      example: '12345678'
                    password_confirmation:
                      type: string
                      example: '12345678'
              required:
              - email
              - password
              - password_confirmation
  "/v1/owners/me":
    get:
      summary: Show me
      tags:
      - Owners
      security:
      - bearer: []
      responses:
        '200':
          description: get me
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    "$ref": "#/components/schemas/owner"
    put:
      summary: Update me
      tags:
      - Owners
      security:
      - bearer: []
      description: to update email or password the current password is required ...
        use the password_current field
      parameters: []
      responses:
        '202':
          description: update email
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    "$ref": "#/components/schemas/owner"
        '422':
          description: owner update fail
          content:
            application/json:
              schema:
                type: object
                properties:
                  email:
                    type: array
                    items:
                      type: string
                      example: can't be blank
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                owner:
                  type: object
                  properties:
                    email:
                      type: string
                      example: kellye@mueller-morar.name
                    password:
                      type: string
                      example: '12345678'
                    password_confirmation:
                      type: string
                      example: '12345678'
                    password_current:
                      type: string
                      example: '12345678'
                      description: Only needed to update sensitive data
                  required:
                  - email
    delete:
      summary: Delete me
      tags:
      - Owners
      security:
      - bearer: []
      responses:
        '204':
          description: destroy success
          content: {}
components:
  schemas:
    owner:
      type: object
      properties:
        id:
          type: string
          example: '1'
        type:
          type: string
          example: owners
        attributes:
          type: object
          properties:
            email:
              type: string
              example: cyndy.hodkiewicz@kovacek.co
            name:
              type: string
              nullable: true
            created_at:
              type: string
              example: '2020-08-21 11:43:07 -0300'
            updated_at:
              type: string
              example: '2020-08-21 11:43:07 -0300'
          required:
          - email
    product:
      type: object
      properties:
        id:
          type: string
          example: '1'
        type:
          type: string
          example: products
        attributes:
          type: object
          properties:
            price:
              type: string
              example: '10.0'
            name:
              type: string
              example: Cheeseburger
            description:
              type: string
              example: To sell delicious and remarkable food and drinks. That the
                food and drink we sell meets the highest standards of quality, freshness
                and seasonality and combines both modern-creative and traditional
                southern styles of cooking. To consistently provide our customers
                with impeccable service by demonstrating warmth, graciousness, efficiency,
                knowledge, professionalism and integrity in our work. To have every
                customer who comes through our doors leave impressed by Maxie’s and
                excited to come back again. To create and maintain a restaurant that
                is comprehensive and exceptional in its attention to every detail
                of operation. To provide all who work with us a friendly, cooperative
                and rewarding environment which encourages long- term, satisfying,
                growth employment. To keep our concept fresh, exciting and on the
                cutting edge of the hospitality and entertainment industry. To be
                a giving member of the Ithaca community and to use our restaurant
                to improve the quality of life in the Finger Lakes region.
              nullable: true
            position:
              type: integer
              example: 0
              nullable: true
            active:
              type: boolean
            image:
              type: object
              nullable: true
              properties:
                original:
                  type: string
                  example: https://loremflickr.com/300/300
                small:
                  type: string
                  example: https://loremflickr.com/300/300
          required:
          - price
          - name
    section:
      type: object
      properties:
        id:
          type: string
        type:
          type: string
          example: sections
        attributes:
          type: object
          properties:
            name:
              type: string
              example: Drinks
            position:
              type: integer
              example: 1
            active:
              type: boolean
    restaurant:
      type: object
      properties:
        type:
          type: string
          example: restaurants
        id:
          type: string
        attributes:
          type: object
          properties:
            name:
              type: string
            slug:
              type: string
            active:
              type: boolean
          required:
          - name
          - slug
          - active
  securitySchemes:
    bearer:
      type: http
      scheme: bearer
servers:
- url: http://localhost:3000
  variables:
    defaultHost:
      default: http://localhost:3000
- url: https://imenu-dev.herokuapp.com
  variables:
    defaultHost:
      default: https://imenu-dev.herokuapp.com
